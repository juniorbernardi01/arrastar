<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ranking DISC – Grupo Compacto Premium</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f3f4f6;
        padding: 12px;
    }

    h2, h3 {
        color: #1B4B8C;
        text-align: center;
        margin: 4px 0;
    }

    .subtexto {
        text-align: center;
        font-size: 13px;
        color: #555;
        margin-bottom: 10px;
    }

    .container-ranking {
        border: 2px solid #1B4B8C;
        background: #ffffff;
        border-radius: 10px;
        padding: 10px;
        margin-bottom: 15px;
    }

    .slot {
        background: #f5f7ff;
        border: 2px dashed #9bb1ff;
        border-radius: 8px;
        padding: 6px 8px;
        min-height: 44px;
        margin-bottom: 6px;
        display: flex;
        align-items: center;
        font-size: 13px;
        color: #555;
        box-sizing: border-box;
    }

    .slot:last-child {
        margin-bottom: 0;
    }

    .slot-label {
        font-weight: bold;
        color: #1B4B8C;
        font-size: 12px;
        margin-right: 6px;
        white-space: nowrap;
        flex-shrink: 0;
    }

    .slot-text {
        font-size: 12px;
        color: #666;
    }

    .slot.filled {
        border-style: solid;
        border-color: #1B4B8C;
        background: #e6edff;
        color: #1B4B8C;
        font-weight: bold;
    }

    /* Lista de adjetivos */
    .adjetivos-titulo {
        font-size: 14px;
        color: #1B4B8C;
        margin: 6px 0 6px 4px;
        font-weight: bold;
    }

    .adjetivos-lista {
        margin-top: 4px;
    }

    .adjetivo-card {
        background: #ffffff;
        padding: 6px 8px;
        border-radius: 8px;
        margin-bottom: 6px;
        font-size: 13px;
        display: flex;
        align-items: center;
        gap: 6px;
        cursor: grab;
        box-shadow: 0 2px 4px rgba(0,0,0,0.08);
        transition: transform 0.1s ease;
    }

    .adjetivo-card:active {
        transform: scale(1.02);
        cursor: grabbing;
    }

    .handle {
        font-size: 18px;
        color: #333;
        flex-shrink: 0;
    }

    /* Fantasma do card quando segue o dedo */
    .drag-ghost {
        position: fixed;
        z-index: 9999;
        max-width: 92%;
        padding: 6px 8px;
        background: #ffffff;
        border-radius: 8px;
        box-shadow: 0 5px 10px rgba(0,0,0,0.25);
        pointer-events: none;
        opacity: 0.95;
        transform: translate(-50%, -50%);
        font-size: 13px;
        display: flex;
        align-items: center;
        gap: 6px;
    }

    @media (min-width: 768px){
        body {
            max-width: 480px;
            margin: 0 auto;
        }
    }
</style>
</head>

<body>

<h2>Grupo 1</h2>
<div class="subtexto">
    Arraste os adjetivos <b>de baixo</b> para as caixas <b>acima</b>.<br>
    <b>Topo = mais parecido com você</b> &mdash; <b>Última caixa = menos parecido</b>.
</div>

<div class="container-ranking" id="ranking">
    <div class="slot" data-pos="1">
        <span class="slot-label">1º</span>
        <span class="slot-text">O que MAIS se parece com você</span>
    </div>
    <div class="slot" data-pos="2">
        <span class="slot-label">2º</span>
        <span class="slot-text">O segundo mais parecido</span>
    </div>
    <div class="slot" data-pos="3">
        <span class="slot-label">3º</span>
        <span class="slot-text">O terceiro mais parecido</span>
    </div>
    <div class="slot" data-pos="4">
        <span class="slot-label">4º</span>
        <span class="slot-text">O que MENOS se parece com você</span>
    </div>
</div>

<div class="adjetivos-titulo">Adjetivos disponíveis (arraste para as caixas acima):</div>

<div class="adjetivos-lista" id="lista">
    <div class="adjetivo-card" draggable="true" data-id="0">
        <span class="handle">☰</span>
        <span>Autoconfiante / Independente / Dominante</span>
    </div>
    <div class="adjetivo-card" draggable="true" data-id="1">
        <span class="handle">☰</span>
        <span>Comunicativo / Alegre / Extrovertido</span>
    </div>
    <div class="adjetivo-card" draggable="true" data-id="2">
        <span class="handle">☰</span>
        <span>Acolhedor / Amigável / Paciente</span>
    </div>
    <div class="adjetivo-card" draggable="true" data-id="3">
        <span class="handle">☰</span>
        <span>Autodisciplinado / Detalhista / Diligente</span>
    </div>
</div>

<script>
let draggingCard = null;
let ghost = null;
let originSlot = null; // se o card veio de um slot, guardamos aqui

const lista = document.getElementById("lista");
const slots = document.querySelectorAll(".slot");

/* ---------------- MOBILE: seguir o dedo ---------------- */

document.querySelectorAll(".adjetivo-card").forEach(card => {

    card.addEventListener("touchstart", e => {
        draggingCard = card;
        originSlot = card.closest(".slot");

        ghost = card.cloneNode(true);
        ghost.classList.add("drag-ghost");
        document.body.appendChild(ghost);

        card.style.opacity = "0.3";

        const touch = e.touches[0];
        ghost.style.left = touch.clientX + "px";
        ghost.style.top = touch.clientY + "px";
    }, { passive: true });

    card.addEventListener("touchmove", e => {
        if (!ghost) return;
        e.preventDefault();

        const touch = e.touches[0];
        ghost.style.left = touch.clientX + "px";
        ghost.style.top = touch.clientY + "px";
    }, { passive: false });

    card.addEventListener("touchend", e => {
        if (!draggingCard) return;

        draggingCard.style.opacity = "1";

        const touch = e.changedTouches[0];
        const elem = document.elementFromPoint(touch.clientX, touch.clientY);

        const slot = elem ? elem.closest(".slot") : null;
        const listaDrop = elem ? elem.closest("#lista") : null;

        if (slot) {
            colocarCardNoSlot(slot, draggingCard);
        } else if (listaDrop) {
            // soltar na lista -> volta para a lista
            devolverParaLista(draggingCard);
        } else {
            // soltou em qualquer outro lugar, não muda a posição
        }

        if (ghost) {
            ghost.remove();
            ghost = null;
        }
        draggingCard = null;
        originSlot = null;
    });
});

/* ---------------- DESKTOP: drag & drop padrão ---------------- */

document.querySelectorAll(".adjetivo-card").forEach(card => {
    card.addEventListener("dragstart", () => {
        draggingCard = card;
        originSlot = card.closest(".slot");
        setTimeout(() => card.style.opacity = "0.3", 0);
    });

    card.addEventListener("dragend", () => {
        if (draggingCard) draggingCard.style.opacity = "1";
        draggingCard = null;
        originSlot = null;
    });
});

slots.forEach(slot => {
    slot.addEventListener("dragover", e => e.preventDefault());

    slot.addEventListener("drop", () => {
        if (!draggingCard) return;
        colocarCardNoSlot(slot, draggingCard);
    });

    // Clique no slot para limpar e devolver o adjetivo
    slot.addEventListener("click", () => {
        if (slot.querySelector(".adjetivo-card")) {
            removerDoSlot(slot);
        }
    });
});

// Permite soltar na lista no desktop
lista.addEventListener("dragover", e => e.preventDefault());
lista.addEventListener("drop", () => {
    if (!draggingCard) return;
    devolverParaLista(draggingCard);
});

/* ---------------- FUNÇÕES PRINCIPAIS ---------------- */

function colocarCardNoSlot(slot, card) {
    // Se o card já estava em outro slot, limpa o slot de origem
    const slotOrigem = originSlot || card.closest(".slot");
    if (slotOrigem && slotOrigem !== slot) {
        limparSlot(slotOrigem);
    }

    // Se o slot alvo já tiver um card, devolve aquele card para a lista
    const cardExistente = slot.querySelector(".adjetivo-card");
    if (cardExistente && cardExistente !== card) {
        devolverParaLista(cardExistente);
    }

    // Esconde o texto placeholder do slot
    const textEl = slot.querySelector(".slot-text");
    if (textEl) textEl.style.display = "none";

    slot.classList.add("filled");
    slot.dataset.cardId = card.dataset.id;

    card.style.display = "flex";
    slot.appendChild(card);
}

function limparSlot(slot) {
    const card = slot.querySelector(".adjetivo-card");
    if (card) {
        // devolve card à lista
        card.style.display = "flex";
        lista.appendChild(card);
    }

    slot.classList.remove("filled");
    slot.removeAttribute("data-cardId");

    const textEl = slot.querySelector(".slot-text");
    if (textEl) {
        const pos = slot.getAttribute("data-pos");
        if (pos === "1") textEl.textContent = "O que MAIS se parece com você";
        else if (pos === "2") textEl.textContent = "O segundo mais parecido";
        else if (pos === "3") textEl.textContent = "O terceiro mais parecido";
        else if (pos === "4") textEl.textContent = "O que MENOS se parece com você";
        textEl.style.display = "inline";
    }
}

function removerDoSlot(slot) {
    const card = slot.querySelector(".adjetivo-card");
    if (card) {
        card.style.display = "flex";
        lista.appendChild(card);
    }
    slot.classList.remove("filled");
    slot.removeAttribute("data-cardId");

    const textEl = slot.querySelector(".slot-text");
    if (textEl) {
        const pos = slot.getAttribute("data-pos");
        if (pos === "1") textEl.textContent = "O que MAIS se parece com você";
        else if (pos === "2") textEl.textContent = "O segundo mais parecido";
        else if (pos === "3") textEl.textContent = "O terceiro mais parecido";
        else if (pos === "4") textEl.textContent = "O que MENOS se parece com você";
        textEl.style.display = "inline";
    }
}

function devolverParaLista(card) {
    const slotAtual = card.closest(".slot");
    if (slotAtual) {
        limparSlot(slotAtual);
    } else {
        // já estava na lista, garante exibição
        card.style.display = "flex";
        lista.appendChild(card);
    }
}
</script>

</body>
</html>
